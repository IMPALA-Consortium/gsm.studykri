% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Analyze_StudyKRI_PredictBoundsRef.R
\name{Analyze_StudyKRI_PredictBoundsRef}
\alias{Analyze_StudyKRI_PredictBoundsRef}
\title{Predict Bounds for Multiple Studies Using Reference Study Mappings}
\usage{
Analyze_StudyKRI_PredictBoundsRef(
  dfInput,
  dfStudyRef,
  strStudyCol = "study",
  strStudyRefCol = "studyref",
  nBootstrapReps = 1000,
  nConfLevel = 0.95,
  strGroupCol = "GroupID",
  strStudyMonthCol = "StudyMonth",
  strMetricCol = "Metric",
  nMinDenominator = 25,
  seed = NULL
)
}
\arguments{
\item{dfInput}{data.frame or tbl_lazy. Site-level data from \code{Input_CumCountSiteByMonth}.}

\item{dfStudyRef}{data.frame. Study-to-reference mappings with two columns specified
by \code{strStudyCol} and \code{strStudyRefCol}.}

\item{strStudyCol}{character. Column name in \code{dfStudyRef} for target studies (default: "study").}

\item{strStudyRefCol}{character. Column name in \code{dfStudyRef} for reference studies (default: "studyref").}

\item{nBootstrapReps}{integer. Number of bootstrap replicates (default: 1000).}

\item{nConfLevel}{numeric. Confidence level for the bounds (default: 0.95).}

\item{strGroupCol}{character. Column name for group identifier (default: "GroupID").}

\item{strStudyMonthCol}{character. Column name for study month (default: "StudyMonth").}

\item{strMetricCol}{character. Column name for metric (default: "Metric").}

\item{nMinDenominator}{numeric. Minimum denominator (default: 25).}

\item{seed}{integer or NULL. Random seed (default: NULL).}
}
\value{
A data.frame with columns: \code{StudyID}, \code{StudyRefID}, \code{StudyMonth},
\code{MedianMetric}, \code{LowerBound}, \code{UpperBound}, \code{BootstrapCount}, \code{GroupCount}, \code{StudyCount}.
}
\description{
Wrapper for \code{Analyze_StudyKRI_PredictBoundsRefSet} that applies study-specific
reference groups. For each study in \code{dfStudyRef}, calculates bounds using its
mapped reference studies.
}
\examples{
# Create study reference mapping
dfStudyRef <- data.frame(
  study = c(rep("STUDY1", 2), rep("STUDY2", 2)),
  studyref = c("REF1", "REF2", "REF2", "REF3")
)

# Create site-level data
dfSiteLevel <- data.frame(
  StudyID = rep(c("STUDY1", "STUDY2", "REF1", "REF2", "REF3"), each = 60),
  GroupID = rep(paste0("Site", 1:10), each = 6, times = 5),
  Numerator = sample(0:5, 300, replace = TRUE),
  Denominator = sample(10:20, 300, replace = TRUE),
  MonthYYYYMM = rep(rep(202301:202306, each = 10), times = 5),
  Metric = runif(300, 0.1, 0.5),
  GroupLevel = "Site"
)

# Calculate study-specific reference bounds
dfBounds <- Analyze_StudyKRI_PredictBoundsRef(
  dfInput = dfSiteLevel,
  dfStudyRef = dfStudyRef,
  nBootstrapReps = 100,
  seed = 42
)

print(head(dfBounds))

}
