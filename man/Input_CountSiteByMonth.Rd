% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Input_CountSiteByMonth.R
\name{Input_CountSiteByMonth}
\alias{Input_CountSiteByMonth}
\title{Calculate Monthly Count by Site and Month}
\usage{
Input_CountSiteByMonth(
  dfSubjects,
  dfNumerator,
  dfDenominator,
  strStudyCol = "studyid",
  strGroupCol = "invid",
  strGroupLevel = "Site",
  strSubjectCol = "subjid",
  strNumeratorCol = NULL,
  strDenominatorCol = NULL,
  strNumeratorDateCol,
  strDenominatorDateCol
)
}
\arguments{
\item{dfSubjects}{data.frame or tbl. Subject-level data with enrolled subjects.}

\item{dfNumerator}{data.frame or tbl. Event data for numerator (e.g., adverse events).}

\item{dfDenominator}{data.frame or tbl. Event data for denominator (e.g., visits).}

\item{strStudyCol}{character. Column name for study identifier (default: "studyid").}

\item{strGroupCol}{character. Column name for site identifier (default: "invid").}

\item{strGroupLevel}{character. Grouping level name (default: "Site").}

\item{strSubjectCol}{character. Column name for subject identifier (default: "subjid").}

\item{strNumeratorCol}{character. Column name for numerator flag (default: NULL, counts all rows).}

\item{strDenominatorCol}{character. Column name for denominator flag (default: NULL, counts all rows).}

\item{strNumeratorDateCol}{character. Date column name in numerator data.}

\item{strDenominatorDateCol}{character. Date column name in denominator data.}
}
\value{
data.frame with columns: GroupID, GroupLevel, Numerator, Denominator, Metric, StudyID, MonthYYYYMM
}
\description{
Calculates monthly event counts and ratios by site and month for KRI analysis.
Joins subject, numerator, and denominator data to create monthly metrics.
Note: This function returns monthly counts, not cumulative. Cumulative aggregation
is performed at the study level in Transform_CumCount.
Supports both in-memory data frames and dbplyr lazy tables.
}
\examples{
dfSubjects <- clindata::rawplus_dm
dfNumerator <- clindata::rawplus_ae
dfDenominator <- clindata::rawplus_visdt

result <- Input_CountSiteByMonth(
  dfSubjects = dfSubjects,
  dfNumerator = dfNumerator,
  dfDenominator = dfDenominator,
  strNumeratorDateCol = "aest_dt",
  strDenominatorDateCol = "visit_dt"
)

}
