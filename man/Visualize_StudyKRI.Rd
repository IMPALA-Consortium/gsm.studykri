% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Visualize_StudyKRI.R
\name{Visualize_StudyKRI}
\alias{Visualize_StudyKRI}
\title{Visualize Study KRI with Confidence Intervals}
\usage{
Visualize_StudyKRI(
  dfStudyKRI,
  dfBoundsRef = NULL,
  dfBounds = NULL,
  strStudyID,
  strStudyMonthCol = "StudyMonth",
  strMetricCol = "Metric",
  nMaxMonth = NULL,
  strTitle = NULL,
  strSubtitle = NULL,
  strYlab = "Metric",
  strXlab = "Study Month"
)
}
\arguments{
\item{dfStudyKRI}{data.frame. Actual study-level metric data from \code{Transform_CumCount}.
Must contain columns specified by \code{strStudyMonthCol} and \code{strMetricCol}.
If a \code{StudyID} column exists, data will be automatically filtered to \code{strStudyID}.}

\item{dfBoundsRef}{data.frame or NULL. Portfolio/comparison group confidence intervals
from \code{Analyze_StudyKRI_PredictBoundsRef} (optional, default: NULL). If provided, must contain: \code{StudyMonth},
\code{MedianMetric}, \code{LowerBound}, \code{UpperBound}. If NULL, plot will show only study data without reference comparison.}

\item{dfBounds}{data.frame or NULL. Individual study confidence intervals
from \code{Analyze_StudyKRI_PredictBounds} (optional). If a \code{StudyID} column exists,
data will be automatically filtered to \code{strStudyID}. If provided, must contain:
\code{StudyMonth}, \code{MedianMetric}, \code{LowerBound}, \code{UpperBound}.}

\item{strStudyID}{character. Study ID to filter data and display in title/subtitle.}

\item{strStudyMonthCol}{character. Column name for study month (default: "StudyMonth").}

\item{strMetricCol}{character. Column name for metric (default: "Metric").}

\item{nMaxMonth}{integer or NULL. Maximum study month to display. If NULL (default),
shows all available months.}

\item{strTitle}{character or NULL. Plot title. If NULL, generates default title.}

\item{strSubtitle}{character or NULL. Plot subtitle. If NULL, generates default
showing comparison study count.}

\item{strYlab}{character. Y-axis label (default: "Metric").}

\item{strXlab}{character. X-axis label (default: "Study Month").}
}
\value{
A ggplot2 object that can be displayed, saved, or further customized.
}
\description{
Creates a layered visualization comparing a study's KRI metric against portfolio
confidence intervals. The plot shows:
\itemize{
\item Portfolio/comparison group confidence intervals (light blue ribbon)
\item Individual study confidence intervals (orange ribbon, optional)
\item Actual study metric line (black line with points)
}

This visualization helps identify when a study's performance deviates from
expected portfolio norms.
}
\examples{
# Basic usage with reference bounds
dfStudyKRI <- data.frame(
  StudyID = rep("STUDY1", 5),
  StudyMonth = 1:5,
  Metric = c(0.10, 0.12, 0.15, 0.14, 0.13)
)

dfBoundsRef <- data.frame(
  StudyMonth = 1:5,
  MedianMetric = c(0.11, 0.13, 0.14, 0.15, 0.14),
  LowerBound = c(0.08, 0.10, 0.11, 0.12, 0.11),
  UpperBound = c(0.14, 0.16, 0.17, 0.18, 0.17)
)

dfBounds <- data.frame(
  StudyMonth = 1:5,
  MedianMetric = c(0.10, 0.12, 0.15, 0.14, 0.13),
  LowerBound = c(0.08, 0.10, 0.12, 0.11, 0.10),
  UpperBound = c(0.12, 0.14, 0.18, 0.17, 0.16)
)

# Plot with reference bounds
p1 <- Visualize_StudyKRI(
  dfStudyKRI = dfStudyKRI,
  dfBoundsRef = dfBoundsRef,
  dfBounds = dfBounds,
  strStudyID = "STUDY1",
  strYlab = "Cumulative AE Rate per Visit"
)

# Plot without reference bounds (only study data)
p2 <- Visualize_StudyKRI(
  dfStudyKRI = dfStudyKRI,
  dfBoundsRef = NULL,
  dfBounds = dfBounds,
  strStudyID = "STUDY1",
  strYlab = "Cumulative AE Rate per Visit"
)

# Plot with only study data (no bounds at all)
p3 <- Visualize_StudyKRI(
  dfStudyKRI = dfStudyKRI,
  strStudyID = "STUDY1",
  strYlab = "Cumulative AE Rate per Visit"
)

}
