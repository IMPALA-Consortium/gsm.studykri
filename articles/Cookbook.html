<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Cookbook • gsm.studykri</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cookbook">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm.studykri</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-sample-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Sample Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-sample-reports">
<li><a class="dropdown-item" href="../report_studykri_AA-1.html">Study AA-1 Report</a></li>
    <li><a class="dropdown-item" href="../report_studykri_AA-2.html">Study AA-2 Report</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cookbook</h1>
            
      

      <div class="d-none name"><code>Cookbook.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/clindata"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.core"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.mapping"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.kri"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.reporting"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"IMPALA-Consortium/gsm.simaerep"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load">Load<a class="anchor" aria-label="anchor" href="#load"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gilead-biostats.github.io/gsm.core" class="external-link">gsm.core</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm.mapping" class="external-link">gsm.mapping</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm.kri" class="external-link">gsm.kri</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gilead-biostats.github.io/gsm.reporting/" class="external-link">gsm.reporting</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://impala-consortium.github.io/gsm.studykri/">gsm.studykri</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>{gsm.studykir} presents an new approach for calculating KRI lower and
upper limits on study-level for quality monitoring in clincial trials.
The method uses bootstrapping to calculate confidence intervals gor a
given study over-time. The confidence intervals can then be used to
compare the study-level KRI against a fixed expectation or against the
confidence intervalls and KRI values over time of one or more reference
studies. The bootstrapping method resamples a new set of sites with
replacement from the original study data set.</p>
</div>
<div class="section level2">
<h2 id="simulate-data-set">Simulate Data Set<a class="anchor" aria-label="anchor" href="#simulate-data-set"></a>
</h2>
<p>We use the clindata package which includes data from one clinical
study to simulate new study data. We create a portfolio with study AA-4
oversampling patients with low AE counts.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lRaw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  Raw_SITE <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_site.html" class="external-link">ctms_site</a></span>,</span>
<span>  Raw_STUDY <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_study.html" class="external-link">ctms_study</a></span>,</span>
<span>  Raw_PD <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_protdev.html" class="external-link">ctms_protdev</a></span>,</span>
<span>  Raw_DATAENT <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/edc_data_pages.html" class="external-link">edc_data_pages</a></span>,</span>
<span>  Raw_QUERY <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/edc_queries.html" class="external-link">edc_queries</a></span>,</span>
<span>  Raw_AE <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_ae.html" class="external-link">rawplus_ae</a></span>,</span>
<span>  Raw_SUBJ <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>  Raw_ENROLL <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va">rawplus_enroll</span>,</span>
<span>  Raw_Randomization <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_ixrsrand.html" class="external-link">rawplus_ixrsrand</a></span>,</span>
<span>  Raw_LB <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_lb.html" class="external-link">rawplus_lb</a></span>,</span>
<span>  Raw_SDRGCOMP <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_sdrgcomp.html" class="external-link">rawplus_sdrgcomp</a></span>,</span>
<span>  Raw_STUDCOMP <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_studcomp.html" class="external-link">rawplus_studcomp</a></span>,</span>
<span>  Raw_VISIT <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lPortfolio</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimulatePortfolio.html">SimulatePortfolio</a></span><span class="op">(</span></span>
<span>  lRaw <span class="op">=</span> <span class="va">lRaw</span>,</span>
<span>  nStudies <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  dfConfig <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    studyid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AA-1"</span>, <span class="st">"AA-2"</span>, <span class="st">"AA-3"</span>, <span class="st">"AA-4"</span><span class="op">)</span>,</span>
<span>    nSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">750</span>, <span class="fl">150</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>    strOversamplDomain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Raw_AE"</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>    vOversamplQuantileRange_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    vOversamplQuantileRange_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 773 subjects with Raw_AE records in 0.00-0.75 quantile range (1-6 records)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculate-kri">Calculate KRI<a class="anchor" aria-label="anchor" href="#calculate-kri"></a>
</h2>
<p>We will calculate the KRI “AE per visit”. For this we need to create
three dataframes:</p>
<ul>
<li>dfSubjects: Subject-level data that links subjects and sites from
the demographics domain</li>
<li>dfNumerator: Subject-level data that contains the events to be
counted (AEs in this case)</li>
<li>dfDenominator: Subject-level data that contains the denominator
events (visits in this case</li>
</ul>
<p>that we transform to return the site-level count of numerator and
denominator per month</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Input_CountSiteByMonth.html">Input_CountSiteByMonth</a></span><span class="op">(</span></span>
<span>      dfSubjects <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_SUBJ</span>,</span>
<span>      dfNumerator <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_AE</span>,</span>
<span>      dfDenominator <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_VISIT</span>,</span>
<span>      strStudyCol <span class="op">=</span> <span class="st">"studyid"</span>,</span>
<span>      strGroupCol <span class="op">=</span> <span class="st">"invid"</span>,</span>
<span>      strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>      strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>      strNumeratorDateCol <span class="op">=</span> <span class="st">"aest_dt"</span>,</span>
<span>      strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span>,</span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfInput</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18,945 × 7</span></span></span>
<span><span class="co">#&gt;    GroupID    GroupLevel Numerator Denominator Metric StudyID MonthYYYYMM</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1_0X004 Site               3           3      1 AA-1         <span style="text-decoration: underline;">200</span>909</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1_0X004 Site               1           1      1 AA-1         <span style="text-decoration: underline;">201</span>301</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1_0X005 Site               1           1      1 AA-1         <span style="text-decoration: underline;">201</span>610</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1_0X006 Site               1           1      1 AA-1         <span style="text-decoration: underline;">200</span>708</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1_0X006 Site               1           1      1 AA-1         <span style="text-decoration: underline;">200</span>709</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1_0X006 Site               2           1      2 AA-1         <span style="text-decoration: underline;">200</span>710</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1_0X006 Site               2           1      2 AA-1         <span style="text-decoration: underline;">200</span>806</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1_0X006 Site               2           1      2 AA-1         <span style="text-decoration: underline;">200</span>904</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1_0X006 Site               1           1      1 AA-1         <span style="text-decoration: underline;">201</span>204</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1_0X007 Site               1           0     <span style="color: #BB0000;">NA</span> AA-1         <span style="text-decoration: underline;">201</span>108</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18,935 more rows</span></span></span></code></pre></div>
<p>Alternatively we can also use days on study as a denominator by
passing subjects as denominator and an end date.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfInputDays</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Input_CountSiteByMonth.html">Input_CountSiteByMonth</a></span><span class="op">(</span></span>
<span>      dfSubjects <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_SUBJ</span>,</span>
<span>      dfNumerator <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_AE</span>,</span>
<span>      dfDenominator <span class="op">=</span> <span class="va">lPortfolio</span><span class="op">$</span><span class="va">Raw_SUBJ</span>,</span>
<span>      strStudyCol <span class="op">=</span> <span class="st">"studyid"</span>,</span>
<span>      strGroupCol <span class="op">=</span> <span class="st">"invid"</span>,</span>
<span>      strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>      strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>      strNumeratorDateCol <span class="op">=</span> <span class="st">"aest_dt"</span>,</span>
<span>      strDenominatorDateCol <span class="op">=</span> <span class="st">"firstparticipantdate"</span>,</span>
<span>      strDenominatorEndDateCol <span class="op">=</span> <span class="st">"lastparticipantdate"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfInputDays</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 23,307 × 7</span></span></span>
<span><span class="co">#&gt;    GroupID    GroupLevel Numerator Denominator Metric StudyID MonthYYYYMM</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1_0X004 Site               3          60 0.05   AA-1         <span style="text-decoration: underline;">200</span>909</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1_0X004 Site               1          31 0.032<span style="text-decoration: underline;">3</span> AA-1         <span style="text-decoration: underline;">201</span>301</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1_0X005 Site               1          31 0.032<span style="text-decoration: underline;">3</span> AA-1         <span style="text-decoration: underline;">201</span>610</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1_0X006 Site               1          22 0.045<span style="text-decoration: underline;">5</span> AA-1         <span style="text-decoration: underline;">200</span>708</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1_0X006 Site               1          30 0.033<span style="text-decoration: underline;">3</span> AA-1         <span style="text-decoration: underline;">200</span>709</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1_0X006 Site               2          31 0.064<span style="text-decoration: underline;">5</span> AA-1         <span style="text-decoration: underline;">200</span>710</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1_0X006 Site               2          30 0.066<span style="text-decoration: underline;">7</span> AA-1         <span style="text-decoration: underline;">200</span>806</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1_0X006 Site               2          30 0.066<span style="text-decoration: underline;">7</span> AA-1         <span style="text-decoration: underline;">200</span>904</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1_0X006 Site               1          30 0.033<span style="text-decoration: underline;">3</span> AA-1         <span style="text-decoration: underline;">201</span>204</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1_0X007 Site               1          31 0.032<span style="text-decoration: underline;">3</span> AA-1         <span style="text-decoration: underline;">201</span>108</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 23,297 more rows</span></span></span></code></pre></div>
<p>Next we transform the data to return the cumulated event counts on
study-level by study month. We define the first study month to be the
month in which we have reached the first 25 Denominator counts across
all sites to account for data artifacts.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfTransformed</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Transform_CumCount.html">Transform_CumCount</a></span><span class="op">(</span></span>
<span>      <span class="va">dfInput</span>,</span>
<span>      nMinDenominator <span class="op">=</span> <span class="fl">25</span>,</span>
<span>      vBy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StudyID"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfTransformed</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 743 × 7</span></span></span>
<span><span class="co">#&gt;    StudyID MonthYYYYMM StudyMonth Numerator Denominator Metric GroupCount</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1         <span style="text-decoration: underline;">200</span>404          1         8          35  0.229         10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1         <span style="text-decoration: underline;">200</span>405          2        12          49  0.245         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1         <span style="text-decoration: underline;">200</span>406          3        14          67  0.209         16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1         <span style="text-decoration: underline;">200</span>407          4        16          90  0.178         21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1         <span style="text-decoration: underline;">200</span>408          5        19         121  0.157         24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1         <span style="text-decoration: underline;">200</span>409          6        28         148  0.189         22</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1         <span style="text-decoration: underline;">200</span>410          7        30         183  0.164         25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1         <span style="text-decoration: underline;">200</span>411          8        31         213  0.146         24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1         <span style="text-decoration: underline;">200</span>412          9        33         245  0.135         24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1         <span style="text-decoration: underline;">200</span>501         10        40         282  0.142         26</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 733 more rows</span></span></span></code></pre></div>
<p>Then we generate site-level bootstrap simulations for the study AA-4
which has been oversampled for low AE counts.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_Analyzed_Bootstrap_Site</span> <span class="op">&lt;-</span> <span class="va">dfInput</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Analyze_StudyKRI.html">Analyze_StudyKRI</a></span><span class="op">(</span>nBootstrapReps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">df_Analyzed_Bootstrap_Site</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18,967,794 × 8</span></span></span>
<span><span class="co">#&gt;    StudyID BootstrapRep GroupID    GroupLevel Numerator Denominator Metric</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1               1 AA-1_0X107 Site               1           1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1               1 AA-1_0X107 Site               1           1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1               1 AA-1_0X107 Site               2           1      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1               1 AA-1_0X107 Site               1           1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1               1 AA-1_0X107 Site               0           1      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1               1 AA-1_0X107 Site               0           1      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1               1 AA-1_0X107 Site               0           2      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1               1 AA-1_0X107 Site               0           1      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1               1 AA-1_0X107 Site               0           1      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1               1 AA-1_0X107 Site               0           2      0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18,967,784 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: MonthYYYYMM &lt;dbl&gt;</span></span></span></code></pre></div>
<p>We aggregate each site-level bootstrap iteration to study-level.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_Analyzed_Bootstrap_Study</span> <span class="op">&lt;-</span> <span class="va">df_Analyzed_Bootstrap_Site</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Transform_CumCount.html">Transform_CumCount</a></span><span class="op">(</span></span>
<span>      nMinDenominator <span class="op">=</span> <span class="fl">25</span>,</span>
<span>      vBy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StudyID"</span>, <span class="st">"BootstrapRep"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_Analyzed_Bootstrap_Study</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 739,600 × 8</span></span></span>
<span><span class="co">#&gt;    StudyID BootstrapRep MonthYYYYMM StudyMonth Numerator Denominator Metric</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1               1      <span style="text-decoration: underline;">200</span>403          1         7          30  0.233</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1               1      <span style="text-decoration: underline;">200</span>404          2        12          53  0.226</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1               1      <span style="text-decoration: underline;">200</span>405          3        22          78  0.282</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1               1      <span style="text-decoration: underline;">200</span>406          4        28         110  0.255</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1               1      <span style="text-decoration: underline;">200</span>407          5        33         144  0.229</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1               1      <span style="text-decoration: underline;">200</span>408          6        38         189  0.201</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1               1      <span style="text-decoration: underline;">200</span>409          7        47         232  0.203</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1               1      <span style="text-decoration: underline;">200</span>410          8        50         274  0.182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1               1      <span style="text-decoration: underline;">200</span>411          9        51         312  0.163</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1               1      <span style="text-decoration: underline;">200</span>412         10        51         354  0.144</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 739,590 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: GroupCount &lt;int&gt;</span></span></span></code></pre></div>
<p>From the study-level bootstrap results we can calculate the 95%
confidence intervalls.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_Bounds</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Analyze_StudyKRI_PredictBounds.html">Analyze_StudyKRI_PredictBounds</a></span><span class="op">(</span></span>
<span>    <span class="va">df_Analyzed_Bootstrap_Study</span>,</span>
<span>    vBy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StudyID"</span><span class="op">)</span>,</span>
<span>    nConfLevel <span class="op">=</span> <span class="fl">0.95</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_Bounds</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 758 × 6</span></span></span>
<span><span class="co">#&gt;    StudyID StudyMonth MedianMetric LowerBound UpperBound BootstrapCount</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AA-1             1        0.222     0.090<span style="text-decoration: underline;">8</span>      0.367           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AA-1             2        0.222     0.081<span style="text-decoration: underline;">6</span>      0.373           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AA-1             3        0.206     0.078<span style="text-decoration: underline;">4</span>      0.353           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AA-1             4        0.184     0.075<span style="text-decoration: underline;">7</span>      0.338           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AA-1             5        0.175     0.081<span style="text-decoration: underline;">3</span>      0.306           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AA-1             6        0.174     0.084<span style="text-decoration: underline;">9</span>      0.285           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AA-1             7        0.163     0.079<span style="text-decoration: underline;">7</span>      0.269           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AA-1             8        0.152     0.083<span style="text-decoration: underline;">0</span>      0.260           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AA-1             9        0.143     0.079<span style="text-decoration: underline;">5</span>      0.242           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AA-1            10        0.142     0.078<span style="text-decoration: underline;">9</span>      0.220           <span style="text-decoration: underline;">1</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 748 more rows</span></span></span></code></pre></div>
<p>We can plot the preliminary results.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Visualize_StudyKRI.html">Visualize_StudyKRI</a></span><span class="op">(</span></span>
<span>    dfStudyKRI <span class="op">=</span> <span class="va">dfTransformed</span>,</span>
<span>    dfBounds <span class="op">=</span> <span class="va">df_Bounds</span>,</span>
<span>    strStudyID <span class="op">=</span> <span class="st">"AA-4"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="Cookbook_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Then we generate the portfolio reference confidence intervals. When
calculating the reference bound the study with the smalles number of
sites determines the total amount of sites sampled for each study, so
that each study contributes equally to the reference distribution.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_Bounds_Ref</span> <span class="op">&lt;-</span> <span class="va">dfInput</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Analyze_StudyKRI_PredictBoundsRefSet.html">Analyze_StudyKRI_PredictBoundsRefSet</a></span><span class="op">(</span></span>
<span>      vStudyFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AA-1"</span>, <span class="st">"AA-2"</span>, <span class="st">"AA-3"</span><span class="op">)</span>,</span>
<span>      nBootstrapReps <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>      nConfLevel <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>      nMinDenominator <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Resampling with minimum group count: 73</span></span>
<span></span>
<span><span class="va">df_Bounds_Ref</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 190 × 7</span></span></span>
<span><span class="co">#&gt;    StudyMonth MedianMetric LowerBound UpperBound BootstrapCount GroupCount</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          1        0.158     0.052<span style="text-decoration: underline;">5</span>      0.485           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          2        0.191     0.075<span style="text-decoration: underline;">5</span>      0.508           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          3        0.283     0.098<span style="text-decoration: underline;">6</span>      0.526           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          4        0.288     0.105       0.507           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          5        0.275     0.105       0.455           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          6        0.275     0.118       0.510           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          7        0.271     0.114       0.530           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          8        0.263     0.112       0.523           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          9        0.248     0.106       0.483           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>         10        0.235     0.106       0.449           <span style="text-decoration: underline;">1</span>000         73</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 180 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: StudyCount &lt;int&gt;</span></span></span></code></pre></div>
<p>Now we can plot the final results.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Visualize_StudyKRI.html">Visualize_StudyKRI</a></span><span class="op">(</span></span>
<span>    <span class="va">dfTransformed</span>,</span>
<span>    <span class="va">df_Bounds_Ref</span>,</span>
<span>    <span class="va">df_Bounds</span>,</span>
<span>    strStudyID <span class="op">=</span> <span class="st">"AA-4"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="Cookbook_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>We can also plot the members of the reference portfolio.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Visualize_StudyKRI.html">Visualize_StudyKRI</a></span><span class="op">(</span></span>
<span>    <span class="va">dfTransformed</span>,</span>
<span>    <span class="va">df_Bounds_Ref</span>,</span>
<span>    <span class="va">df_Bounds</span>,</span>
<span>    strStudyID <span class="op">=</span> <span class="st">"AA-1"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Visualize_StudyKRI.html">Visualize_StudyKRI</a></span><span class="op">(</span></span>
<span>    <span class="va">dfTransformed</span>,</span>
<span>    <span class="va">df_Bounds_Ref</span>,</span>
<span>    <span class="va">df_Bounds</span>,</span>
<span>    strStudyID <span class="op">=</span> <span class="st">"AA-2"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Visualize_StudyKRI.html">Visualize_StudyKRI</a></span><span class="op">(</span></span>
<span>    <span class="va">dfTransformed</span>,</span>
<span>    <span class="va">df_Bounds_Ref</span>,</span>
<span>    <span class="va">df_Bounds</span>,</span>
<span>    strStudyID <span class="op">=</span> <span class="st">"AA-3"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html" class="external-link">plot_layout</a></span><span class="op">(</span>guides <span class="op">=</span> <span class="st">"collect"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Cookbook_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="calculate-kri-using-yaml-workflows">Calculate KRI using yaml workflows<a class="anchor" aria-label="anchor" href="#calculate-kri-using-yaml-workflows"></a>
</h2>
<p>We can also use the {gsm}-style yaml workflow. Here we start with a
portfolio with 6 studies of which 2 are target studies for whcih reports
will be built, while the others serve as reference.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate multi-study portfolio using SimulatePortfolio</span></span>
<span><span class="va">lRaw_original</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    Raw_SUBJ <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>    Raw_AE <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_ae.html" class="external-link">rawplus_ae</a></span>,</span>
<span>    Raw_VISIT <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span>,</span>
<span>    Raw_SITE <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_site.html" class="external-link">ctms_site</a></span>,</span>
<span>    Raw_STUDY <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_study.html" class="external-link">ctms_study</a></span>,</span>
<span>    Raw_PD <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_protdev.html" class="external-link">ctms_protdev</a></span>,</span>
<span>    Raw_DATAENT <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/edc_data_pages.html" class="external-link">edc_data_pages</a></span>,</span>
<span>    Raw_QUERY <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/edc_queries.html" class="external-link">edc_queries</a></span>,</span>
<span>    Raw_ENROLL <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va">rawplus_enroll</span>,</span>
<span>    Raw_Randomization <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_ixrsrand.html" class="external-link">rawplus_ixrsrand</a></span>,</span>
<span>    Raw_LB <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_lb.html" class="external-link">rawplus_lb</a></span>,</span>
<span>    Raw_SDRGCOMP <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_sdrgcomp.html" class="external-link">rawplus_sdrgcomp</a></span>,</span>
<span>    Raw_STUDCOMP <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_studcomp.html" class="external-link">rawplus_studcomp</a></span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a portfolio with 3 studies</span></span>
<span><span class="va">lRaw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimulatePortfolio.html">SimulatePortfolio</a></span><span class="op">(</span></span>
<span>    lRaw <span class="op">=</span> <span class="va">lRaw_original</span>,</span>
<span>    nStudies <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>    dfConfig <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>      studyid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AA-1"</span>, <span class="st">"AA-2"</span>, <span class="st">"AA-3"</span>, <span class="st">"AA-4"</span>, <span class="st">"AA-5"</span>, <span class="st">"AA-6"</span><span class="op">)</span>,</span>
<span>      nSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">750</span>, <span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">250</span>, <span class="fl">300</span><span class="op">)</span>,</span>
<span>      strOversamplDomain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Raw_AE"</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>      vOversamplQuantileRange_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>      vOversamplQuantileRange_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.75</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0.95</span>, <span class="fl">0.9</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 773 subjects with Raw_AE records in 0.00-0.75 quantile range (1-6 records)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 1016 subjects with Raw_AE records in 0.00-1.00 quantile range (1-31 records)</span></span>
<span><span class="co">#&gt; Filtered to 969 subjects with Raw_AE records in 0.00-0.95 quantile range (1-13 records)</span></span>
<span><span class="co">#&gt; Filtered to 914 subjects with Raw_AE records in 0.00-0.90 quantile range (1-10 records)</span></span>
<span></span>
<span><span class="va">lRaw</span><span class="op">$</span><span class="va">Raw_StudyRef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>   studyid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"AA-1"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"AA-2"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>   studyrefid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AA-3"</span>, <span class="st">"AA-4"</span>, <span class="st">"AA-5"</span>, <span class="st">"AA-3"</span>, <span class="st">"AA-4"</span>, <span class="st">"AA-5"</span>, <span class="st">"AA-6"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run mapping workflows</span></span>
<span><span class="va">mapping_wf</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/MakeWorkflowList.html" class="external-link">MakeWorkflowList</a></span><span class="op">(</span></span>
<span>    strNames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    strPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"workflow/1_mappings"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span>,</span>
<span>    strPackage <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lIngest</span> <span class="op">&lt;-</span> <span class="fu">gsm.mapping</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.mapping/reference/Ingest.html" class="external-link">Ingest</a></span><span class="op">(</span><span class="va">lRaw</span>, <span class="fu">gsm.mapping</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.mapping/reference/CombineSpecs.html" class="external-link">CombineSpecs</a></span><span class="op">(</span><span class="va">mapping_wf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for AE.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 6545 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for ENROLL.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for LB.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1457497 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for PD.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 27876 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for Randomization.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for SDRGCOMP.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 876 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for STUDCOMP.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 154 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for StudyRef.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 7 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for SUBJ.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for VISIT.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; Warning: Field `visit_dt`: 13 unparsable Date(s) set to NA</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 36113 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for DATAENT.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1484772 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for SUBJ.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for QUERY.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 253554 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for SITE.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 632 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Ingesting data for STUDY.</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 6 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span></span>
<span></span>
<span><span class="va">lMapped</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/RunWorkflows.html" class="external-link">RunWorkflows</a></span><span class="op">(</span>lWorkflows <span class="op">=</span> <span class="va">mapping_wf</span>, lData <span class="op">=</span> <span class="va">lIngest</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Running 15 Workflows</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_AE` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_AE</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_AE are in the expected format</span></span>
<span><span class="co">#&gt; → All 7 specified column(s) in the spec are present in the data: Raw_AE$subjid, Raw_AE$aeser, Raw_AE$aest_dt, Raw_AE$aeen_dt, Raw_AE$mdrpt_nsv, Raw_AE$mdrsoc_nsv, Raw_AE$aetoxgr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_AE: No matching data found. Passing 'Mapped_AE' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_AE: Passing lData$Raw_AE.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6545x7 data.frame saved as `lData$Mapped_AE`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 6545x7 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_AE` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_ENROLL` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_ENROLL</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_ENROLL are in the expected format</span></span>
<span><span class="co">#&gt; → All 6 specified column(s) in the spec are present in the data: Raw_ENROLL$studyid, Raw_ENROLL$invid, Raw_ENROLL$country, Raw_ENROLL$subjid, Raw_ENROLL$subjectid, Raw_ENROLL$enrollyn</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_ENROLL: No matching data found. Passing 'Mapped_ENROLL' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_ENROLL: Passing lData$Raw_ENROLL.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1661x6 data.frame saved as `lData$Mapped_ENROLL`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 1661x6 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_ENROLL` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_LB` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_LB</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_LB are in the expected format</span></span>
<span><span class="co">#&gt; → All 2 specified column(s) in the spec are present in the data: Raw_LB$subjid, Raw_LB$toxgrg_nsv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_LB: No matching data found. Passing 'Mapped_LB' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_LB: Passing lData$Raw_LB.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1457497x2 data.frame saved as `lData$Mapped_LB`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 1457497x2 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_LB` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_PD` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_PD</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_PD are in the expected format</span></span>
<span><span class="co">#&gt; → All 2 specified column(s) in the spec are present in the data: Raw_PD$subjid, Raw_PD$deemedimportant</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_PD: No matching data found. Passing 'Mapped_PD' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_PD: Passing lData$Raw_PD.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 27876x2 data.frame saved as `lData$Mapped_PD`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 27876x2 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_PD` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_Randomization` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_Randomization</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_Randomization are in the expected format</span></span>
<span><span class="co">#&gt; → All 6 specified column(s) in the spec are present in the data: Raw_Randomization$studyid, Raw_Randomization$invid, Raw_Randomization$subjid, Raw_Randomization$rand_dt, Raw_Randomization$status, Raw_Randomization$country</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_Randomization: Passing lData$Raw_Randomization.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT  studyid, invid, subjid, rand_dt, status, country FROM df WHERE subjid IS NOT NULL AND (status != 'Screen Failed' OR status IS NULL): No matching data found. Passing 'SELECT  studyid, invid, subjid, rand_dt, status, country FROM df WHERE subjid IS NOT NULL AND (status != 'Screen Failed' OR status IS NULL)' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1661x6 data.frame saved as `lData$Mapped_Randomization`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 1661x6 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_Randomization` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_SDRGCOMP` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_SDRGCOMP</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_SDRGCOMP are in the expected format</span></span>
<span><span class="co">#&gt; → All 3 specified column(s) in the spec are present in the data: Raw_SDRGCOMP$subjid, Raw_SDRGCOMP$sdrgyn, Raw_SDRGCOMP$phase</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_SDRGCOMP: No matching data found. Passing 'Mapped_SDRGCOMP' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_SDRGCOMP: Passing lData$Raw_SDRGCOMP.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 876x3 data.frame saved as `lData$Mapped_SDRGCOMP`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 876x3 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_SDRGCOMP` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_STUDCOMP` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_STUDCOMP</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_STUDCOMP are in the expected format</span></span>
<span><span class="co">#&gt; → All 3 specified column(s) in the spec are present in the data: Raw_STUDCOMP$subjid, Raw_STUDCOMP$compyn, Raw_STUDCOMP$compreas</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `=`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `=`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> lhs = Mapped_STUDCOMP: No matching data found. Passing 'Mapped_STUDCOMP' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> rhs = Raw_STUDCOMP: Passing lData$Raw_STUDCOMP.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `=`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 154x3 data.frame saved as `lData$Mapped_STUDCOMP`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 154x3 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_STUDCOMP` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_StudyRef` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_StudyRef</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_StudyRef are in the expected format</span></span>
<span><span class="co">#&gt; → All 2 specified column(s) in the spec are present in the data: Raw_StudyRef$studyid, Raw_StudyRef$studyrefid</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_StudyRef: Passing lData$Raw_StudyRef.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT studyid AS study, studyrefid AS studyref FROM df: No matching data found. Passing 'SELECT studyid AS study, studyrefid AS studyref FROM df' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 7 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 7x2 data.frame saved as `lData$Mapped_StudyRef`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 7x2 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_StudyRef` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_SUBJ` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 14 specified column(s) in the spec are present in the data: Raw_SUBJ$studyid, Raw_SUBJ$invid, Raw_SUBJ$country, Raw_SUBJ$subjid, Raw_SUBJ$subject_nsv, Raw_SUBJ$enrollyn, Raw_SUBJ$timeonstudy, Raw_SUBJ$firstparticipantdate, Raw_SUBJ$lastparticipantdate, Raw_SUBJ$firstdosedate, Raw_SUBJ$timeontreatment, Raw_SUBJ$agerep, Raw_SUBJ$sex, Raw_SUBJ$race</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_SUBJ: Passing lData$Raw_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT * FROM df WHERE enrollyn == 'Y': No matching data found. Passing 'SELECT * FROM df WHERE enrollyn == 'Y'' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 1661 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1661x14 data.frame saved as `lData$Mapped_SUBJ`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 1661x14 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_SUBJ` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_Visit` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Raw_VISIT</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_VISIT are in the expected format</span></span>
<span><span class="co">#&gt; → All 4 specified column(s) in the spec are present in the data: Raw_VISIT$subjid, Raw_VISIT$visit_dt, Raw_VISIT$visit_folder, Raw_VISIT$invid</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_VISIT: Passing lData$Raw_VISIT.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT subjid, visit_dt, visit_folder, invid FROM df: No matching data found. Passing 'SELECT subjid, visit_dt, visit_folder, invid FROM df' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 36113 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 36113x4 data.frame saved as `lData$Mapped_VISIT`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 36113x4 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_Visit` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_DATAENT` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 2 data.frame(s) in the spec are present in the data: Raw_DATAENT, Mapped_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_DATAENT are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 4 specified column(s) in the spec are present in the data: Raw_DATAENT$subject_nsv, Raw_DATAENT$data_entry_lag, Mapped_SUBJ$subjid, Mapped_SUBJ$subject_nsv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 2: `dplyr::select`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `dplyr::select`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> .data = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> subjid = subjid: No matching data found. Passing 'subjid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> subject_nsv = subject_nsv: No matching data found. Passing 'subject_nsv' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::select`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1661x2 data.frame saved as `lData$Temp_SubjectLookup`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 2: `dplyr::left_join`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `dplyr::left_join`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> x = Raw_DATAENT: Passing lData$Raw_DATAENT.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> y = Temp_SubjectLookup: Passing lData$Temp_SubjectLookup.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> by = subject_nsv: No matching data found. Passing 'subject_nsv' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::left_join`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1484772x3 data.frame saved as `lData$Mapped_DATAENT`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 1484772x3 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_DATAENT` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_QUERY` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 2 data.frame(s) in the spec are present in the data: Raw_QUERY, Mapped_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_QUERY are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 5 specified column(s) in the spec are present in the data: Raw_QUERY$subject_nsv, Raw_QUERY$querystatus, Raw_QUERY$queryage, Mapped_SUBJ$subjid, Mapped_SUBJ$subject_nsv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 2: `dplyr::select`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `dplyr::select`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> .data = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> subjid = subjid: No matching data found. Passing 'subjid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> subject_nsv = subject_nsv: No matching data found. Passing 'subject_nsv' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::select`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1661x2 data.frame saved as `lData$Temp_SubjectLookup`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 2: `dplyr::left_join`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `dplyr::left_join`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> x = Raw_QUERY: Passing lData$Raw_QUERY.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> y = Temp_SubjectLookup: Passing lData$Temp_SubjectLookup.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> by = subject_nsv: No matching data found. Passing 'subject_nsv' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::left_join`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 253554x4 data.frame saved as `lData$Mapped_QUERY`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 253554x4 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_QUERY` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_COUNTRY` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 1 data.frame(s) in the spec are present in the data: Mapped_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 3 specified column(s) in the spec are present in the data: Mapped_SUBJ$country, Mapped_SUBJ$invid, Mapped_SUBJ$subjid</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 2: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT country as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df GROUP BY country: No matching data found. Passing 'SELECT country as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df GROUP BY country' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 3 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 3x3 data.frame saved as `lData$Temp_CountryCountsWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 2: `gsm.mapping::MakeLongMeta`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CountryCountsWide: Passing lData$Temp_CountryCountsWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupLevel = Country: No matching data found. Passing 'Country' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x4 data.frame saved as `lData$Mapped_COUNTRY`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 6x4 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_COUNTRY` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_SITE` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 2 data.frame(s) in the spec are present in the data: Raw_SITE, Mapped_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_SITE are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 11 specified column(s) in the spec are present in the data: Raw_SITE$studyid, Raw_SITE$invid, Raw_SITE$InvestigatorFirstName, Raw_SITE$InvestigatorLastName, Raw_SITE$site_status, Raw_SITE$City, Raw_SITE$State, Raw_SITE$Country, Mapped_SUBJ$studyid, Mapped_SUBJ$invid, Mapped_SUBJ$subjid</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 5: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_SITE: Passing lData$Raw_SITE.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT invid as GroupID, * FROM df: No matching data found. Passing 'SELECT invid as GroupID, * FROM df' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 632 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 632x9 data.frame saved as `lData$Temp_CTMSSiteWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 5: `gsm.mapping::MakeLongMeta`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CTMSSiteWide: Passing lData$Temp_CTMSSiteWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupLevel = Site: No matching data found. Passing 'Site' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 5056x4 data.frame saved as `lData$Temp_CTMSSite`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 3 of 5: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT invid as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df GROUP BY invid: No matching data found. Passing 'SELECT invid as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df GROUP BY invid' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 591 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 591x3 data.frame saved as `lData$Temp_SiteCountsWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 4 of 5: `gsm.mapping::MakeLongMeta`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_SiteCountsWide: Passing lData$Temp_SiteCountsWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupLevel = Site: No matching data found. Passing 'Site' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1182x4 data.frame saved as `lData$Temp_SiteCounts`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 5 of 5: `dplyr::bind_rows`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Temp_CTMSSite = Temp_CTMSSite: Passing lData$Temp_CTMSSite.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Temp_SiteCounts = Temp_SiteCounts: Passing lData$Temp_SiteCounts.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6238x4 data.frame saved as `lData$Mapped_SITE`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 6238x4 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_SITE` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Mapped_STUDY` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 2 data.frame(s) in the spec are present in the data: Raw_STUDY, Raw_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_STUDY are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Raw_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 18 specified column(s) in the spec are present in the data: Raw_STUDY$studyid, Raw_STUDY$nickname, Raw_STUDY$protocol_title, Raw_STUDY$status, Raw_STUDY$num_plan_site, Raw_STUDY$num_plan_subj, Raw_STUDY$act_fpfv, Raw_STUDY$est_fpfv, Raw_STUDY$est_lplv, Raw_STUDY$est_lpfv, Raw_STUDY$therapeutic_area, Raw_STUDY$protocol_indication, Raw_STUDY$phase, Raw_STUDY$product, Raw_SUBJ$studyid, Raw_SUBJ$invid, Raw_SUBJ$subjid, Raw_SUBJ$enrollyn</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 9: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_STUDY: Passing lData$Raw_STUDY.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT studyid as GroupID, * FROM df: No matching data found. Passing 'SELECT studyid as GroupID, * FROM df' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 6 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x15 data.frame saved as `lData$Temp_CTMSStudyWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 9: `gsm.mapping::MakeLongMeta`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CTMSStudyWide: Passing lData$Temp_CTMSStudyWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupLevel = Study: No matching data found. Passing 'Study' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 84x4 data.frame saved as `lData$Temp_CTMSStudy`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 3 of 9: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_STUDY: Passing lData$Raw_STUDY.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT studyid as GroupID, num_plan_site as SiteTarget, num_plan_subj as ParticipantTarget FROM df: No matching data found. Passing 'SELECT studyid as GroupID, num_plan_site as SiteTarget, num_plan_subj as ParticipantTarget FROM df' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 6 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x3 data.frame saved as `lData$Temp_CTMSplanned`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 4 of 9: `gsm.core::RunQuery`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> df = Raw_SUBJ: Passing lData$Raw_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strQuery = SELECT studyid as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df WHERE enrollyn == 'Y' GROUP BY studyid: No matching data found. Passing 'SELECT studyid as GroupID, COUNT(DISTINCT subjid) as ParticipantCount, COUNT(DISTINCT invid) as SiteCount FROM df WHERE enrollyn == 'Y' GROUP BY studyid' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.core::RunQuery`</span></span>
<span><span class="co">#&gt; Creating a new temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> SQL Query complete: 6 rows returned.</span></span>
<span><span class="co">#&gt; Disconnected from temporary DuckDB connection.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x3 data.frame saved as `lData$Temp_StudyCountsWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 5 of 9: `dplyr::left_join`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `dplyr::left_join`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> x = Temp_CTMSplanned: Passing lData$Temp_CTMSplanned.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> y = Temp_StudyCountsWide: Passing lData$Temp_StudyCountsWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> by = GroupID: No matching data found. Passing 'GroupID' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::left_join`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x5 data.frame saved as `lData$Temp_CountTargetsWide`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 6 of 9: `gsm.mapping::CalculatePercentage`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 5 parameter(s) for `gsm.mapping::CalculatePercentage`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CountTargetsWide: Passing lData$Temp_CountTargetsWide.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strCurrentCol = SiteCount: No matching data found. Passing 'SiteCount' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strTargetCol = SiteTarget: No matching data found. Passing 'SiteTarget' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strPercVal = PercentSitesActivated: No matching data found. Passing 'PercentSitesActivated' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strPercStrVal = SiteActivation: No matching data found. Passing 'SiteActivation' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::CalculatePercentage`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x7 data.frame saved as `lData$Temp_CountTargetsWide_addsite`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 7 of 9: `gsm.mapping::CalculatePercentage`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 5 parameter(s) for `gsm.mapping::CalculatePercentage`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CountTargetsWide_addsite: Passing lData$Temp_CountTargetsWide_addsite.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strCurrentCol = ParticipantCount: No matching data found. Passing 'ParticipantCount' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strTargetCol = ParticipantTarget: No matching data found. Passing 'ParticipantTarget' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strPercVal = PercentParticipantsEnrolled: No matching data found. Passing 'PercentParticipantsEnrolled' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strPercStrVal = ParticipantEnrollment: No matching data found. Passing 'ParticipantEnrollment' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::CalculatePercentage`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 6x9 data.frame saved as `lData$Temp_CountTargetsWide_addsitepts`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 8 of 9: `gsm.mapping::MakeLongMeta`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> data = Temp_CountTargetsWide_addsitepts: Passing lData$Temp_CountTargetsWide_addsitepts.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupLevel = Study: No matching data found. Passing 'Study' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.mapping::MakeLongMeta`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 48x4 data.frame saved as `lData$Temp_CountTargetsPercs`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 9 of 9: `dplyr::bind_rows`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Temp_CTMSStudy = Temp_CTMSStudy: Passing lData$Temp_CTMSStudy.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Temp_CountTargetsPercs = Temp_CountTargetsPercs: Passing lData$Temp_CountTargetsPercs.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 132x4 data.frame saved as `lData$Mapped_STUDY`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 132x4 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Mapped_STUDY` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span></span>
<span></span>
<span><span class="co"># Run KRI workflow</span></span>
<span><span class="va">metrics_wf</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/MakeWorkflowList.html" class="external-link">MakeWorkflowList</a></span><span class="op">(</span></span>
<span>    strNames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    strPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"workflow/2_metrics"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span>,</span>
<span>    strPackage <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine lMapped with metrics workflows for comprehensive result</span></span>
<span><span class="va">lAnalyzed</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/RunWorkflows.html" class="external-link">RunWorkflows</a></span><span class="op">(</span>lWorkflows <span class="op">=</span> <span class="va">metrics_wf</span>, lData <span class="op">=</span> <span class="va">lMapped</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Running 2 Workflows</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Analysis_kri0001` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 3 data.frame(s) in the spec are present in the data: Mapped_AE, Mapped_SUBJ, Mapped_Visit</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_AE are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_Visit are in the expected format</span></span>
<span><span class="co">#&gt; → All 7 specified column(s) in the spec are present in the data: Mapped_AE$subjid, Mapped_AE$aest_dt, Mapped_SUBJ$subjid, Mapped_SUBJ$invid, Mapped_SUBJ$studyid, Mapped_Visit$subjid, Mapped_Visit$visit_dt</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 7: `gsm.studykri::Input_CountSiteByMonth`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 9 parameter(s) for `gsm.studykri::Input_CountSiteByMonth`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfSubjects = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfNumerator = Mapped_AE: Passing lData$Mapped_AE.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfDenominator = Mapped_Visit: Passing lData$Mapped_Visit.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strStudyCol = studyid: No matching data found. Passing 'studyid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupCol = invid: No matching data found. Passing 'invid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> strGroupLevel = GroupLevel: Passing lMeta$GroupLevel.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strSubjectCol = subjid: No matching data found. Passing 'subjid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strNumeratorDateCol = aest_dt: No matching data found. Passing 'aest_dt' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strDenominatorDateCol = visit_dt: No matching data found. Passing 'visit_dt' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Input_CountSiteByMonth`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 26212x7 data.frame saved as `lData$Analysis_Input`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 7: `gsm.studykri::Transform_CumCount`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy = StudyID: No matching data found. Passing 'StudyID' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1110x7 data.frame saved as `lData$Analysis_Transformed`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 3 of 7: `gsm.studykri::Analyze_StudyKRI`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Analyze_StudyKRI`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nBootstrapReps = BootstrapReps: Passing lMeta$BootstrapReps.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> seed = 42: No matching data found. Passing '42' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 26214557x8 data.frame saved as `lData$Analysis_Bootstrapped`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 4 of 7: `gsm.studykri::Transform_CumCount`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Bootstrapped: Passing lData$Analysis_Bootstrapped.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy is of length 2: Parameter is a vector. Passing as is.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1106889x8 data.frame saved as `lData$Analysis_BootstrappedStudy`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 5 of 7: `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_BootstrappedStudy: Passing lData$Analysis_BootstrappedStudy.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy = StudyID: No matching data found. Passing 'StudyID' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nConfLevel = Threshold: Passing lMeta$Threshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1127x6 data.frame saved as `lData$Analysis_Bounds`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 6 of 7: `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 6 parameter(s) for `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfStudyRef = Mapped_StudyRef: Passing lData$Mapped_StudyRef.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nBootstrapReps = BootstrapReps: Passing lMeta$BootstrapReps.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nConfLevel = Threshold: Passing lMeta$Threshold.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> seed = 42: No matching data found. Passing '42' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span></span>
<span><span class="co">#&gt; Resampling with minimum group count: 69</span></span>
<span><span class="co">#&gt; Resampling with minimum group count: 69</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 378x9 data.frame saved as `lData$Analysis_BoundsRef`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 7 of 7: `list`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 7 parameter(s) for `list`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> ID = ID: Passing lMeta$ID.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Input = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Transformed = Analysis_Transformed: Passing lData$Analysis_Transformed.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Bootstrapped = Analysis_Bootstrapped: Passing lData$Analysis_Bootstrapped.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_BootstrappedStudy = Analysis_BootstrappedStudy: Passing lData$Analysis_BootstrappedStudy.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Bounds = Analysis_Bounds: Passing lData$Analysis_Bounds.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_BoundsRef = Analysis_BoundsRef: Passing lData$Analysis_BoundsRef.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `list`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── list of length 7 saved as `lData$lAnalysis`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: list of length 7`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Analysis_kri0001` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Analysis_kri0002` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Checking data against spec</span></span>
<span><span class="co">#&gt; → All 2 data.frame(s) in the spec are present in the data: Mapped_AE, Mapped_SUBJ</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_AE are in the expected format</span></span>
<span><span class="co">#&gt; → All specified columns in Mapped_SUBJ are in the expected format</span></span>
<span><span class="co">#&gt; → All 7 specified column(s) in the spec are present in the data: Mapped_AE$subjid, Mapped_AE$aest_dt, Mapped_SUBJ$subjid, Mapped_SUBJ$invid, Mapped_SUBJ$studyid, Mapped_SUBJ$firstparticipantdate, Mapped_SUBJ$lastparticipantdate</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 7: `gsm.studykri::Input_CountSiteByMonth`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 10 parameter(s) for `gsm.studykri::Input_CountSiteByMonth`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfSubjects = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfNumerator = Mapped_AE: Passing lData$Mapped_AE.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfDenominator = Mapped_SUBJ: Passing lData$Mapped_SUBJ.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strStudyCol = studyid: No matching data found. Passing 'studyid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strGroupCol = invid: No matching data found. Passing 'invid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> strGroupLevel = GroupLevel: Passing lMeta$GroupLevel.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strSubjectCol = subjid: No matching data found. Passing 'subjid' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strNumeratorDateCol = aest_dt: No matching data found. Passing 'aest_dt' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strDenominatorDateCol = firstparticipantdate: No matching data found. Passing 'firstparticipantdate' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strDenominatorEndDateCol = lastparticipantdate: No matching data found. Passing 'lastparticipantdate' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Input_CountSiteByMonth`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 32433x7 data.frame saved as `lData$Analysis_Input`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 7: `gsm.studykri::Transform_CumCount`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy = StudyID: No matching data found. Passing 'StudyID' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1124x7 data.frame saved as `lData$Analysis_Transformed`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 3 of 7: `gsm.studykri::Analyze_StudyKRI`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Analyze_StudyKRI`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nBootstrapReps = BootstrapReps: Passing lMeta$BootstrapReps.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> seed = 42: No matching data found. Passing '42' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 32432932x8 data.frame saved as `lData$Analysis_Bootstrapped`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 4 of 7: `gsm.studykri::Transform_CumCount`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Bootstrapped: Passing lData$Analysis_Bootstrapped.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy is of length 2: Parameter is a vector. Passing as is.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Transform_CumCount`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1122028x8 data.frame saved as `lData$Analysis_BootstrappedStudy`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 5 of 7: `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 3 parameter(s) for `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_BootstrappedStudy: Passing lData$Analysis_BootstrappedStudy.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vBy = StudyID: No matching data found. Passing 'StudyID' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nConfLevel = Threshold: Passing lMeta$Threshold.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI_PredictBounds`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 1139x6 data.frame saved as `lData$Analysis_Bounds`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 6 of 7: `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 6 parameter(s) for `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfInput = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfStudyRef = Mapped_StudyRef: Passing lData$Mapped_StudyRef.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nBootstrapReps = BootstrapReps: Passing lMeta$BootstrapReps.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nConfLevel = Threshold: Passing lMeta$Threshold.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> nMinDenominator = AccrualThreshold: Passing lMeta$AccrualThreshold.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> seed = 42: No matching data found. Passing '42' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Analyze_StudyKRI_PredictBoundsRef`</span></span>
<span><span class="co">#&gt; Resampling with minimum group count: 69</span></span>
<span><span class="co">#&gt; Resampling with minimum group count: 69</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 380x9 data.frame saved as `lData$Analysis_BoundsRef`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 7 of 7: `list`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 7 parameter(s) for `list`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> ID = ID: Passing lMeta$ID.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Input = Analysis_Input: Passing lData$Analysis_Input.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Transformed = Analysis_Transformed: Passing lData$Analysis_Transformed.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Bootstrapped = Analysis_Bootstrapped: Passing lData$Analysis_Bootstrapped.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_BootstrappedStudy = Analysis_BootstrappedStudy: Passing lData$Analysis_BootstrappedStudy.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_Bounds = Analysis_Bounds: Passing lData$Analysis_Bounds.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Analysis_BoundsRef = Analysis_BoundsRef: Passing lData$Analysis_BoundsRef.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `list`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── list of length 7 saved as `lData$lAnalysis`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: list of length 7`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Analysis_kri0002` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate-kri-report-using-scripts">Generate KRI report using scripts<a class="anchor" aria-label="anchor" href="#generate-kri-report-using-scripts"></a>
</h2>
<p>and subsequently generate a KRI report using {gsm.reporting}.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dfResults</span> <span class="op">&lt;-</span> <span class="fu">gsm.reporting</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.reporting/reference/BindResults.html" class="external-link">BindResults</a></span><span class="op">(</span><span class="va">lAnalyzed</span>, <span class="st">"Analysis_Transformed"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfBounds</span> <span class="op">&lt;-</span> <span class="fu">gsm.reporting</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.reporting/reference/BindResults.html" class="external-link">BindResults</a></span><span class="op">(</span><span class="va">lAnalyzed</span>, <span class="st">"Analysis_Bounds"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfBoundsRef</span> <span class="op">&lt;-</span> <span class="fu">gsm.reporting</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.reporting/reference/BindResults.html" class="external-link">BindResults</a></span><span class="op">(</span><span class="va">lAnalyzed</span>, <span class="st">"Analysis_BoundsRef"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfMetrics</span> <span class="op">&lt;-</span> <span class="fu">gsm.reporting</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.reporting/reference/MakeMetric.html" class="external-link">MakeMetric</a></span><span class="op">(</span><span class="va">metrics_wf</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfGroups</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="va">lMapped</span><span class="op">$</span><span class="va">Mapped_STUDY</span>,</span>
<span>  <span class="va">lMapped</span><span class="op">$</span><span class="va">Mapped_SITE</span>,</span>
<span>  <span class="va">lMapped</span><span class="op">$</span><span class="va">Country</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lCharts</span> <span class="op">&lt;-</span> <span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/MakeCharts_StudyKRI.html">MakeCharts_StudyKRI</a></span><span class="op">(</span><span class="va">dfResults</span>, <span class="va">dfBounds</span>, <span class="va">dfBoundsRef</span>, <span class="va">dfMetrics</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gsm.studykri</span><span class="fu">::</span><span class="fu"><a href="../reference/Report_KRI_StudyKRI.html">Report_KRI_StudyKRI</a></span><span class="op">(</span></span>
<span>  lCharts <span class="op">=</span> <span class="va">lCharts</span>,</span>
<span>  dfResults <span class="op">=</span> <span class="va">dfResults</span>,</span>
<span>  dfGroups <span class="op">=</span> <span class="va">dfGroups</span>,</span>
<span>  dfMetrics <span class="op">=</span> <span class="va">dfMetrics</span>,</span>
<span>  strOutputFile <span class="op">=</span> <span class="st">"report_studykri.html"</span>,</span>
<span>  strInputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"report"</span>, <span class="st">"Report_KRI.Rmd"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; processing file: Report_KRI.Rmd</span></span>
<span><span class="co">#&gt; output file: /tmp/RtmpHsV4SI/Report_KRI.knit.md</span></span>
<span><span class="co">#&gt; /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpHsV4SI/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.studykri/gsm.studykri/vignettes/report_studykri_AA-1.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_collapsed=1 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=flatly --mathjax --variable 'mathjax-url=https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' --include-in-header /tmp/RtmpHsV4SI/rmarkdown-str20e842447721.html --variable code_folding=hide --variable code_menu=1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: report_studykri_AA-1.html</span></span>
<span><span class="co">#&gt; processing file: Report_KRI.Rmd</span></span>
<span><span class="co">#&gt; output file: /tmp/RtmpHsV4SI/Report_KRI.knit.md</span></span>
<span><span class="co">#&gt; /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpHsV4SI/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.studykri/gsm.studykri/vignettes/report_studykri_AA-2.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_collapsed=1 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=flatly --mathjax --variable 'mathjax-url=https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' --include-in-header /tmp/RtmpHsV4SI/rmarkdown-str20e8602f3775.html --variable code_folding=hide --variable code_menu=1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: report_studykri_AA-2.html</span></span>
<span><span class="co">#&gt;                        AA-1                        AA-2 </span></span>
<span><span class="co">#&gt; "report_studykri_AA-1.html" "report_studykri_AA-2.html"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate-kri-report-using-yaml-workflows">Generate KRI report using yaml workflows<a class="anchor" aria-label="anchor" href="#generate-kri-report-using-yaml-workflows"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">reporting_wf</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/MakeWorkflowList.html" class="external-link">MakeWorkflowList</a></span><span class="op">(</span></span>
<span>    strPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"workflow/3_reporting"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Pass both lMapped and lAnalyzed, plus workflows</span></span>
<span><span class="va">lReporting</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/RunWorkflows.html" class="external-link">RunWorkflows</a></span><span class="op">(</span></span>
<span>    lWorkflows <span class="op">=</span> <span class="va">reporting_wf</span>,</span>
<span>    lData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="va">lMapped</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        lAnalyzed <span class="op">=</span> <span class="va">lAnalyzed</span>,</span>
<span>        lWorkflows <span class="op">=</span> <span class="va">metrics_wf</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Running 5 Workflows</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Reporting_Bounds` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.reporting::BindResults`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> lAnalysis = lAnalyzed: Passing lData$lAnalyzed.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strName = Analysis_Bounds: No matching data found. Passing 'Analysis_Bounds' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 2266x8 data.frame saved as `lData$lBounds`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 2266x8 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Reporting_Bounds` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Reporting_BoundsRef` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.reporting::BindResults`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> lAnalysis = lAnalyzed: Passing lData$lAnalyzed.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strName = Analysis_BoundsRef: No matching data found. Passing 'Analysis_BoundsRef' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 758x11 data.frame saved as `lData$lBoundsRef`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 758x11 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Reporting_BoundsRef` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Reporting_Groups` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `dplyr::bind_rows`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 1 parameter(s) for `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> .list is of length 3: Parameter is a vector. Passing as is.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `dplyr::bind_rows`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 3x1 data.frame saved as `lData$dfGroups`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 3x1 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Reporting_Groups` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Reporting_Metrics` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.reporting::MakeMetric`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 1 parameter(s) for `gsm.reporting::MakeMetric`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> lWorkflows = lWorkflows: Passing lData$lWorkflows.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.reporting::MakeMetric`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 2x16 data.frame saved as `lData$dfMetrics`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 2x16 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Reporting_Metrics` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Reporting_Results` Workflow</span> <span style="color: #00BBBB;">───────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 1: `gsm.reporting::BindResults`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 2 parameter(s) for `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> lAnalysis = lAnalyzed: Passing lData$lAnalyzed.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strName = Analysis_Transformed: No matching data found. Passing 'Analysis_Transformed' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.reporting::BindResults`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── 2234x9 data.frame saved as `lData$lResults`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: 2234x9 data.frame`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Reporting_Results` Workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span></span>
<span></span>
<span><span class="va">module_wf_gsm</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/MakeWorkflowList.html" class="external-link">MakeWorkflowList</a></span><span class="op">(</span></span>
<span>  strNames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"workflow/4_modules"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span>,</span>
<span>  strPackage <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we cannot set a dynamic link to the report path in the yaml files</span></span>
<span><span class="va">report_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"report"</span>, <span class="st">"Report_KRI.Rmd"</span>, package <span class="op">=</span> <span class="st">"gsm.studykri"</span><span class="op">)</span></span>
<span><span class="va">n_steps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">module_wf_gsm</span><span class="op">$</span><span class="va">StudyKRI</span><span class="op">$</span><span class="va">steps</span><span class="op">)</span></span>
<span></span>
<span><span class="va">module_wf_gsm</span><span class="op">$</span><span class="va">StudyKRI</span><span class="op">$</span><span class="va">steps</span><span class="op">[[</span><span class="va">n_steps</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">params</span><span class="op">$</span><span class="va">strInputPath</span> <span class="op">&lt;-</span> <span class="va">report_path</span></span>
<span></span>
<span><span class="va">lModule</span> <span class="op">&lt;-</span> <span class="fu">gsm.core</span><span class="fu">::</span><span class="fu"><a href="https://gilead-biostats.github.io/gsm.core/reference/RunWorkflows.html" class="external-link">RunWorkflows</a></span><span class="op">(</span><span class="va">module_wf_gsm</span>, <span class="va">lReporting</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Running 1 Workflows</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Initializing `Module_StudyKRI` Workflow</span> <span style="color: #00BBBB;">─────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── No spec found in workflow. Proceeding without checking data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 1 of 2: `gsm.studykri::MakeCharts_StudyKRI`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 5 parameter(s) for `gsm.studykri::MakeCharts_StudyKRI`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfResults = Reporting_Results: Passing lData$Reporting_Results.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfBounds = Reporting_Bounds: Passing lData$Reporting_Bounds.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfBoundsRef = Reporting_BoundsRef: Passing lData$Reporting_BoundsRef.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfMetrics = Reporting_Metrics: Passing lData$Reporting_Metrics.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> nMaxMonth is of length 0: Parameter is a vector. Passing as is.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::MakeCharts_StudyKRI`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── list of length 4 saved as `lData$lCharts`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Workflow Step 2 of 2: `gsm.studykri::Report_KRI_StudyKRI`</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Evaluating 6 parameter(s) for `gsm.studykri::Report_KRI_StudyKRI`</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> lCharts = lCharts: Passing lData$lCharts.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfResults = Reporting_Results: Passing lData$Reporting_Results.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfGroups = Reporting_Groups: Passing lData$Reporting_Groups.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> dfMetrics = Reporting_Metrics: Passing lData$Reporting_Metrics.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strOutputFile = report_studykri.html: No matching data found. Passing 'report_studykri.html' as a string.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> strInputPath = /home/runner/work/_temp/Library/gsm.studykri/report/Report_KRI.Rmd: No matching data found. Passing '/home/runner/work/_temp/Library/gsm.studykri/report/Report_KRI.Rmd' as a string.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Calling `gsm.studykri::Report_KRI_StudyKRI`</span></span>
<span><span class="co">#&gt; processing file: Report_KRI.Rmd</span></span>
<span><span class="co">#&gt; output file: /tmp/RtmpHsV4SI/Report_KRI.knit.md</span></span>
<span><span class="co">#&gt; /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpHsV4SI/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.studykri/gsm.studykri/vignettes/report_studykri_AA-1.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_collapsed=1 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=flatly --mathjax --variable 'mathjax-url=https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' --include-in-header /tmp/RtmpHsV4SI/rmarkdown-str20e865657e5a.html --variable code_folding=hide --variable code_menu=1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: report_studykri_AA-1.html</span></span>
<span><span class="co">#&gt; processing file: Report_KRI.Rmd</span></span>
<span><span class="co">#&gt; output file: /tmp/RtmpHsV4SI/Report_KRI.knit.md</span></span>
<span><span class="co">#&gt; /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpHsV4SI/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.studykri/gsm.studykri/vignettes/report_studykri_AA-2.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_collapsed=1 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=flatly --mathjax --variable 'mathjax-url=https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' --include-in-header /tmp/RtmpHsV4SI/rmarkdown-str20e82e2434e3.html --variable code_folding=hide --variable code_menu=1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: report_studykri_AA-2.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── character of length 2 saved as `lData$strReportPath`.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Returning results from final step: character of length 2`.</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Completed `Module_StudyKRI` Workflow</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
