<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Bootstrap Resamples for Study-Level KRI Analysis — Analyze_StudyKRI • gsm.studykri</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Bootstrap Resamples for Study-Level KRI Analysis — Analyze_StudyKRI"><meta name="description" content="Generates bootstrap resamples by resampling groups (sites/countries) with
replacement within each study. Uses dbplyr-compatible approach with runif()
for random selection. Each bootstrap replicate randomly selects groups and
includes all their associated data."><meta property="og:description" content="Generates bootstrap resamples by resampling groups (sites/countries) with
replacement within each study. Uses dbplyr-compatible approach with runif()
for random selection. Each bootstrap replicate randomly selects groups and
includes all their associated data."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm.studykri</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate Bootstrap Resamples for Study-Level KRI Analysis</h1>

      <div class="d-none name"><code>Analyze_StudyKRI.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates bootstrap resamples by resampling groups (sites/countries) with
replacement within each study. Uses dbplyr-compatible approach with runif()
for random selection. Each bootstrap replicate randomly selects groups and
includes all their associated data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Analyze_StudyKRI</span><span class="op">(</span></span>
<span>  <span class="va">dfInput</span>,</span>
<span>  nBootstrapReps <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  nGroups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strStudyCol <span class="op">=</span> <span class="st">"StudyID"</span>,</span>
<span>  strGroupCol <span class="op">=</span> <span class="st">"GroupID"</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tblBootstrapReps <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dfinput">dfInput<a class="anchor" aria-label="anchor" href="#arg-dfinput"></a></dt>
<dd><p>data.frame or tbl_lazy. Group-level data from <code>Input_CumCountSiteByMonth</code>.
Expected columns: GroupID, GroupLevel, Numerator, Denominator, Metric,
StudyID, MonthYYYYMM (or custom column names specified in parameters).</p></dd>


<dt id="arg-nbootstrapreps">nBootstrapReps<a class="anchor" aria-label="anchor" href="#arg-nbootstrapreps"></a></dt>
<dd><p>integer. Number of bootstrap replicates to generate.
Defaults to 1000.</p></dd>


<dt id="arg-ngroups">nGroups<a class="anchor" aria-label="anchor" href="#arg-ngroups"></a></dt>
<dd><p>integer or NULL. Number of groups to resample per replicate.
If NULL (default), uses the actual number of groups per study. If specified,
can be used to upsample (larger than actual) or downsample (smaller than actual).</p></dd>


<dt id="arg-strstudycol">strStudyCol<a class="anchor" aria-label="anchor" href="#arg-strstudycol"></a></dt>
<dd><p>character. Column name for study identifier. Defaults to "StudyID".</p></dd>


<dt id="arg-strgroupcol">strGroupCol<a class="anchor" aria-label="anchor" href="#arg-strgroupcol"></a></dt>
<dd><p>character. Column name for group identifier. Defaults to "GroupID".</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer or NULL. Random seed for reproducibility. If NULL (default),
no seed is set. Note: seed only affects in-memory data frames, not SQL queries.</p></dd>


<dt id="arg-tblbootstrapreps">tblBootstrapReps<a class="anchor" aria-label="anchor" href="#arg-tblbootstrapreps"></a></dt>
<dd><p>tbl_lazy, data.frame, or NULL. For lazy table inputs:
Optional pre-generated bootstrap replicate indices. Must have 'BootstrapRep'
column with values 1 to nBootstrapReps. If NULL, attempts to create temp table
(requires write privileges).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame (or tbl_lazy if input was lazy) with all original columns plus:</p><ul><li><p><code>BootstrapRep</code>: integer, bootstrap replicate number (1 to nBootstrapReps)</p></li>
<li><p>Original data rows are replicated across bootstrap samples with groups
resampled with replacement</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Generate group-level data</span></span></span>
<span class="r-in"><span><span class="va">dfSubjects</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span></span></span>
<span class="r-in"><span><span class="va">dfNumerator</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_ae.html" class="external-link">rawplus_ae</a></span></span></span>
<span class="r-in"><span><span class="va">dfDenominator</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="Input_CountSiteByMonth.html">Input_CountSiteByMonth</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfSubjects <span class="op">=</span> <span class="va">dfSubjects</span>,</span></span>
<span class="r-in"><span>  dfNumerator <span class="op">=</span> <span class="va">dfNumerator</span>,</span></span>
<span class="r-in"><span>  dfDenominator <span class="op">=</span> <span class="va">dfDenominator</span>,</span></span>
<span class="r-in"><span>  strNumeratorDateCol <span class="op">=</span> <span class="st">"aest_dt"</span>,</span></span>
<span class="r-in"><span>  strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate bootstrap samples</span></span></span>
<span class="r-in"><span><span class="va">dfBootstrap</span> <span class="op">&lt;-</span> <span class="fu">Analyze_StudyKRI</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfInput <span class="op">=</span> <span class="va">dfInput</span>,</span></span>
<span class="r-in"><span>  nBootstrapReps <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">42</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Aggregate each bootstrap replicate to study level</span></span></span>
<span class="r-in"><span><span class="va">dfStudyLevel</span> <span class="op">&lt;-</span> <span class="fu"><a href="Transform_CumCount.html">Transform_CumCount</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfInput <span class="op">=</span> <span class="va">dfBootstrap</span>,</span></span>
<span class="r-in"><span>  vBy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StudyID"</span>, <span class="st">"BootstrapRep"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  nMinDenominator <span class="op">=</span> <span class="fl">25</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dfStudyLevel</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          StudyID BootstrapRep MonthYYYYMM StudyMonth Numerator Denominator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 AA-AA-000-0000            1      200402          1         2          40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 AA-AA-000-0000            1      200403          2         8          65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 AA-AA-000-0000            1      200404          3        13          98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 AA-AA-000-0000            1      200405          4        23         144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 AA-AA-000-0000            1      200406          5        24         188</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 AA-AA-000-0000            1      200407          6        35         243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Metric GroupCount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.0500000          8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.1230769         11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.1326531         13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.1597222         16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.1276596         19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.1440329         22</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

