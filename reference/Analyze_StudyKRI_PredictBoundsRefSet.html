<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predict Bounds for Combined Group of Studies — Analyze_StudyKRI_PredictBoundsRefSet • gsm.studykri</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict Bounds for Combined Group of Studies — Analyze_StudyKRI_PredictBoundsRefSet"><meta name="description" content="Calculates percentile-based confidence intervals (bounds) for a combined portfolio
of comparison studies. This function creates a &quot;comparison envelope&quot; by:
Finding the minimum group (site) count across selected studies
Resampling each study with that minimum to ensure fair comparison
Combining data across all studies
Calculating confidence intervals for the pooled distribution


This enables comparing one study's KRI against expected variation from a portfolio
of similar studies."><meta property="og:description" content="Calculates percentile-based confidence intervals (bounds) for a combined portfolio
of comparison studies. This function creates a &quot;comparison envelope&quot; by:
Finding the minimum group (site) count across selected studies
Resampling each study with that minimum to ensure fair comparison
Combining data across all studies
Calculating confidence intervals for the pooled distribution


This enables comparing one study's KRI against expected variation from a portfolio
of similar studies."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm.studykri</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predict Bounds for Combined Group of Studies</h1>

      <div class="d-none name"><code>Analyze_StudyKRI_PredictBoundsRefSet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates percentile-based confidence intervals (bounds) for a combined portfolio
of comparison studies. This function creates a "comparison envelope" by:</p><ol><li><p>Finding the minimum group (site) count across selected studies</p></li>
<li><p>Resampling each study with that minimum to ensure fair comparison</p></li>
<li><p>Combining data across all studies</p></li>
<li><p>Calculating confidence intervals for the pooled distribution</p></li>
</ol><p>This enables comparing one study's KRI against expected variation from a portfolio
of similar studies.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Analyze_StudyKRI_PredictBoundsRefSet</span><span class="op">(</span></span>
<span>  <span class="va">dfInput</span>,</span>
<span>  vStudyFilter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nBootstrapReps <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  nConfLevel <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  strStudyCol <span class="op">=</span> <span class="st">"StudyID"</span>,</span>
<span>  strGroupCol <span class="op">=</span> <span class="st">"GroupID"</span>,</span>
<span>  strStudyMonthCol <span class="op">=</span> <span class="st">"StudyMonth"</span>,</span>
<span>  strMetricCol <span class="op">=</span> <span class="st">"Metric"</span>,</span>
<span>  nMinDenominator <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dfinput">dfInput<a class="anchor" aria-label="anchor" href="#arg-dfinput"></a></dt>
<dd><p>data.frame or tbl_lazy. Site-level data from <code>Input_CumCountSiteByMonth</code>.
Must contain columns: <code>StudyID</code>, <code>GroupID</code>, <code>Numerator</code>, <code>Denominator</code>, <code>MonthYYYYMM</code>.</p></dd>


<dt id="arg-vstudyfilter">vStudyFilter<a class="anchor" aria-label="anchor" href="#arg-vstudyfilter"></a></dt>
<dd><p>character or NULL. Study IDs to include in comparison group.
If NULL (default), uses all studies found in dfInput.
Example: <code>c("STUDY1", "STUDY2", "STUDY3")</code>.</p></dd>


<dt id="arg-nbootstrapreps">nBootstrapReps<a class="anchor" aria-label="anchor" href="#arg-nbootstrapreps"></a></dt>
<dd><p>integer. Number of bootstrap replicates (default: 1000).</p></dd>


<dt id="arg-nconflevel">nConfLevel<a class="anchor" aria-label="anchor" href="#arg-nconflevel"></a></dt>
<dd><p>numeric. Confidence level for the bounds, between 0 and 1
(default: 0.95 for 95% CI).</p></dd>


<dt id="arg-strstudycol">strStudyCol<a class="anchor" aria-label="anchor" href="#arg-strstudycol"></a></dt>
<dd><p>character. Column name for study identifier (default: "StudyID").</p></dd>


<dt id="arg-strgroupcol">strGroupCol<a class="anchor" aria-label="anchor" href="#arg-strgroupcol"></a></dt>
<dd><p>character. Column name for group identifier (default: "GroupID").</p></dd>


<dt id="arg-strstudymonthcol">strStudyMonthCol<a class="anchor" aria-label="anchor" href="#arg-strstudymonthcol"></a></dt>
<dd><p>character. Column name for sequential study month
(default: "StudyMonth").</p></dd>


<dt id="arg-strmetriccol">strMetricCol<a class="anchor" aria-label="anchor" href="#arg-strmetriccol"></a></dt>
<dd><p>character. Column name for metric (default: "Metric").</p></dd>


<dt id="arg-nmindenominator">nMinDenominator<a class="anchor" aria-label="anchor" href="#arg-nmindenominator"></a></dt>
<dd><p>numeric. Minimum denominator for Transform_CumCount
(default: 25).</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer or NULL. Random seed for reproducibility (default: NULL).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame (or tbl_lazy if input was lazy) with confidence intervals.
Output columns: <code>StudyMonth</code>, <code>MedianMetric</code>, <code>LowerBound</code>, <code>UpperBound</code>,
<code>BootstrapCount</code>, <code>GroupCount</code>, <code>StudyCount</code>.
Note: No <code>StudyID</code> column as studies are intentionally combined.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create example site-level data for multiple studies</span></span></span>
<span class="r-in"><span><span class="va">dfSiteLevel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  StudyID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDY1"</span>, <span class="st">"STUDY2"</span>, <span class="st">"STUDY3"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  GroupID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Site"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">6</span>, times <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Numerator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">180</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Denominator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">180</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  MonthYYYYMM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">202301</span><span class="op">:</span><span class="fl">202306</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">180</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  GroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span></span>
<span class="r-in"><span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate comparison envelope from 3 studies</span></span></span>
<span class="r-in"><span><span class="va">dfGroupBounds</span> <span class="op">&lt;-</span> <span class="fu">Analyze_StudyKRI_PredictBoundsRefSet</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfInput <span class="op">=</span> <span class="va">dfSiteLevel</span>,</span></span>
<span class="r-in"><span>  vStudyFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDY1"</span>, <span class="st">"STUDY2"</span>, <span class="st">"STUDY3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  nBootstrapReps <span class="op">=</span> <span class="fl">100</span>,  <span class="co"># Use small number for example</span></span></span>
<span class="r-in"><span>  nConfLevel <span class="op">=</span> <span class="fl">0.95</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">42</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Resampling with minimum group count: 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dfGroupBounds</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   StudyMonth MedianMetric LowerBound UpperBound BootstrapCount GroupCount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1    0.1781615  0.1375943  0.2106618            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          2    0.1562525  0.1217324  0.1936074            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          3    0.1662783  0.1370265  0.1973369            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          4    0.1683761  0.1423421  0.1957048            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          5    0.1712779  0.1467434  0.1950078            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          6    0.1700583  0.1496072  0.1918633            100         10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   StudyCount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          3</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

